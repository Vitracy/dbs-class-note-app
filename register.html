<!-- Credit: faiz-dev, vitracy -->
<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Note Keep</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:ital,wght@0,200..800;1,200..800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdn.hugeicons.com/font/hgi-stroke-rounded.css" />
  <link rel="stylesheet" type="text/css" href="global.css">
</head>

<body>

  <form onsubmit="return tambahUser()">
    <div class="container">
      <i class="hgi hgi-stroke hgi-property-edit app-logo"></i>
      <h1 class="title">Get Started</h1>
      <p class="sub-title">Create a free account to save your notes and access them anywhere</p>


      <!-- input email -->
      <div class="input-group">
        <label for="">Email Address</label>
        <input class="input" id="input-email" type="email" placeholder="name@example.com" required>
      </div>

      <!-- input password -->
      <div class="input-group">
        <label for="">Password</label>
        <input class="input" id="input-password" type="password" placeholder="Enter password" required>
        <span class="not-valid" id="not-valid-password" >Must be at least 6 characters!</span>
      </div>

      <div class="input-group">
        <label for="">Confirm Password</label>
        <input class="input" id="input-confirm-password" type="password" placeholder="Re-enter password" required>
        <span class="not-valid" id="not-confirmed-password" >Password does not match!</span>
      </div>

      <button type="submit" class="btn-submit" id="btn-register" >Register</button>

      <p class="under-text">
        Already have an account? <a href="./index.html">Log in</a>
      </p>

    </div>
  </form>
  <script type="text/javascript">
    // let users = [];

    let inConfirmPassword = document.getElementById("input-confirm-password");
    let inPassword = document.getElementById("input-password");
    let btnRegister = document.getElementById("btn-register");

    inConfirmPassword.oninput = function() {
      if (inConfirmPassword.value && inPassword.value != inConfirmPassword.value) {
        document.getElementById("not-confirmed-password").style.display = "block";
        btnRegister.style.opacity = 0.5;
      }
      else {
        document.getElementById("not-confirmed-password").style.display = "none";
        btnRegister.style.opacity = 1;
      }
    }

    inPassword.oninput = function() {
      if (inPassword.value && inPassword.value.length < 6) {
        document.getElementById("not-valid-password").style.display = "block";
        btnRegister.style.opacity = 0.5;
      }
      else {
        document.getElementById("not-valid-password").style.display = "none";
        btnRegister.style.opacity = 1;
      }
    }

    function validatePassword(password) {
      const passwordPattern = /^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{8,}$/;
      return passwordPattern.test(password);
    }

    // function
    function tambahUser() {
      if (inPassword.value != inConfirmPassword.value) return false;
      // mengenali elemen html
      let inEmail = document.getElementById("input-email");
      
      // melihat value dari object inEmail
      //console.log(inEmail.value);
      //console.log(inPassword.value);

      // memeriksa apakah password sama dengan yang dikonfirmasi
      

      let newUser = {
        email: inEmail.value,
        password: inPassword.value
      }
      saveToStorage(newUser);
      // users.push(newUser);

      window.location.href = './dashboard.html';
      return false;
    }

    function saveToStorage(dataUser) {
      let stringDataUser = JSON.stringify(dataUser);
      localStorage.setItem('user', stringDataUser);
    }
  </script>
</body>

</html>